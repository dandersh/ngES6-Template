{"version":3,"sources":["../../../../../../node_modules/karma-es6-shim/node_modules/es6-shim/test/browser-onload.js"],"names":[],"mappings":";;AAAA;;AAEA,IAAI,OAAO,MAAP,KAAkB,WAAtB,EAAmC;AACjC,SAAO,cAAP,GAAwB,CAAxB;AACA,SAAO,OAAP,GAAiB,KAAjB;AACA,SAAO,MAAP,GAAgB,YAAY;AAC1B,WAAO,WAAP,GAAqB,IAArB;AACA,QAAI,gBAAgB,SAAhB,aAAgB,CAAU,MAAV,EAAkB;AACpC,UAAI,cAAc,EAAlB;AACA,UAAI,OAAO,KAAP,CAAa,GAAjB,EAAsB;AACpB,eAAO,WAAP,GAAqB,OAAO,KAAP,CAAa,QAAb,KAA0B,CAA/C;AACD;AACD,aAAO,EAAP,CAAU,MAAV,EAAkB,YAAY;AAC5B,eAAO,cAAP,IAAyB,CAAzB;AACD,OAFD;AAGA,aAAO,EAAP,CAAU,MAAV,EAAkB,UAAU,IAAV,EAAgB,GAAhB,EAAqB;AACrC,eAAO,OAAP,GAAiB,IAAjB;AACA,YAAI,gBAAgB,SAAhB,aAAgB,CAAU,aAAV,EAAyB;AAC3C,cAAI,SAAS,EAAb;AACA,cAAI,cAAc,aAAlB;AACA,iBAAO,YAAY,MAAZ,CAAmB,KAA1B,EAAiC;AAC/B,mBAAO,IAAP,CAAY,YAAY,MAAZ,CAAmB,KAA/B;AACA,0BAAc,YAAY,MAA1B;AACD;AACD,iBAAO,OAAO,OAAP,EAAP;AACD,SARD;AASA,oBAAY,IAAZ,CAAiB;AACf,gBAAM,KAAK,KADI;AAEf,kBAAQ,KAFO;AAGf,mBAAS,IAAI,OAHE;AAIf,iBAAO,IAAI,KAJI;AAKf,kBAAQ,cAAc,IAAd;AALO,SAAjB;AAOD,OAlBD;AAmBA,aAAO,EAAP,CAAU,KAAV,EAAiB,YAAY;AAC3B,eAAO,WAAP,GAAqB,CAAC,OAAO,OAA7B;AACA;AACA,eAAO,YAAP,GAAsB,OAAO,KAA7B;AACA,eAAO,YAAP,CAAoB,OAApB,GAA8B,WAA9B;AACD,OALD;AAMA,aAAO,MAAP;AACD,KAlCD;AAmCA,kBAAc,MAAM,GAAN,EAAd;AACD,GAtCD;AAuCD","file":"browser-onload.js","sourcesContent":["/* global window, mocha */\n\nif (typeof window !== 'undefined') {\n  window.completedTests = 0;\n  window.sawFail = false;\n  window.onload = function () {\n    window.testsPassed = null;\n    var handleResults = function (runner) {\n      var failedTests = [];\n      if (runner.stats.end) {\n        window.testsPassed = runner.stats.failures === 0;\n      }\n      runner.on('pass', function () {\n        window.completedTests += 1;\n      });\n      runner.on('fail', function (test, err) {\n        window.sawFail = true;\n        var flattenTitles = function (testToFlatten) {\n          var titles = [];\n          var currentTest = testToFlatten;\n          while (currentTest.parent.title) {\n            titles.push(currentTest.parent.title);\n            currentTest = currentTest.parent;\n          }\n          return titles.reverse();\n        };\n        failedTests.push({\n          name: test.title,\n          result: false,\n          message: err.message,\n          stack: err.stack,\n          titles: flattenTitles(test)\n        });\n      });\n      runner.on('end', function () {\n        window.testsPassed = !window.sawFail;\n        // for sauce\n        window.mochaResults = runner.stats;\n        window.mochaResults.reports = failedTests;\n      });\n      return runner;\n    };\n    handleResults(mocha.run());\n  };\n}\n"]}