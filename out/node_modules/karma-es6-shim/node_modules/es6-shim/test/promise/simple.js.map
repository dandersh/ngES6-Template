{"version":3,"sources":["../../../../../../../node_modules/karma-es6-shim/node_modules/es6-shim/test/promise/simple.js"],"names":[],"mappings":";;AAAA;;AAEA,IAAI,eAAe,SAAf,YAAe,CAAU,IAAV,EAAgB;AACjC;;AAEA,SAAO,UAAU,CAAV,EAAa;AAClB,SAAK,KAAK,IAAI,KAAJ,EAAV;AACD,GAFD;AAGD,CAND;;AAQA,SAAS,SAAT,EAAoB,YAAY;AAC9B;;AAEA,UAAQ,iEAAR,EAA2E,UAAU,IAAV,EAAgB;AACzF,YAAQ,OAAR,CAAgB,CAAhB,EAAmB,IAAnB,CAAwB,UAAU,KAAV,EAAiB;AACvC,aAAO,WAAP,CAAmB,KAAnB,EAA0B,CAA1B;AACD,KAFD,EAEG,IAFH,CAEQ,IAFR,EAEc,aAAa,IAAb,CAFd;AAGD,GAJD;;AAMA,UAAQ,4CAAR,EAAsD,UAAU,IAAV,EAAgB;AACpE,QAAI,cAAJ;AACA,QAAI,UAAU,IAAI,OAAJ,CAAY,UAAU,OAAV,EAAmB;AAAE,uBAAiB,OAAjB;AAA2B,KAA5D,CAAd;;AAEA,mBAAe,OAAf;;AAEA,YAAQ,IAAR,CACE,YAAY;AACV,aAAO,KAAP,EAAc,yBAAd;AACD,KAHH,EAIE,UAAU,GAAV,EAAe;AACb,aAAO,eAAe,SAAtB;AACD,KANH,EAOE,IAPF,CAOO,IAPP,EAOa,aAAa,IAAb,CAPb;AAQD,GAdD;;AAgBA,UAAQ,2EAAR,EAAqF,YAAY;AAC/F,QAAI,cAAJ;AACA,QAAI,6BAA6B,SAAS,0BAAT,CAAoC,QAApC,EAA8C;AAC7E,uBAAiB,QAAjB;AACA,eAAS,YAAY,CAAG,CAAxB,EAA0B,YAAY,CAAG,CAAzC;AACD,KAHD;;AAKA,QAAI,WAAW,EAAf;AACA,QAAI,eAAe,YAAnB,CAAiC;AACjC,aAAS,YAAT,IAAyB,YAAY;AACnC,qBAAe,IAAf,EAAqB,IAArB;AACA,YAAM,IAAI,KAAJ,CAAU,CAAV,CAAN;AACD,KAHD;;AAKA,WAAO,YAAP,CAAoB,YAAY;AAC9B,cAAQ,GAAR,CAAY,IAAZ,CAAiB,0BAAjB,EAA6C,QAA7C;AACD,KAFD;AAGD,GAjBD;;AAmBA,UAAQ,uCAAR,EAAiD,YAAY;AAC3D,QAAI,OAAJ;AACA,QAAI,IAAI,IAAI,OAAJ,CAAY,UAAU,CAAV,EAAa;AAAE,gBAAU,CAAV;AAAc,KAAzC,CAAR;AACA,QAAI,QAAQ,CAAZ;AACA,YAAQ;AACN,YAAM,gBAAY;AAChB,iBAAS,CAAT;AACA,cAAM,IAAI,UAAJ,CAAe,oBAAf,CAAN;AACD;AAJK,KAAR;AAMA,QAAI,IAAI,EAAE,IAAF,CAAO,YAAY,CAAE,CAArB,EAAuB,OAAvB,EAAgC,UAAU,GAAV,EAAe;AACrD,aAAO,KAAP,CAAa,KAAb,EAAoB,CAApB;AACA,aAAO,EAAP,CAAU,eAAe,UAAzB;AACD,KAHO,CAAR;AAIA,QAAI,IAAI,EAAE,IAAF,CAAO,YAAY,CAAE,CAArB,EAAuB,OAAvB,EAAgC,UAAU,GAAV,EAAe;AACrD,aAAO,KAAP,CAAa,KAAb,EAAoB,CAApB;AACA,aAAO,EAAP,CAAU,eAAe,UAAzB;AACD,KAHO,CAAR;AAIA,WAAO,QAAQ,GAAR,CAAY,CAAC,CAAD,EAAI,CAAJ,CAAZ,CAAP;AACD,GAnBD;;AAqBA,UAAQ,iFAAR,EAA2F,YAAY;AACrG,QAAI,OAAJ;AACA,QAAI,IAAI,IAAI,OAAJ,CAAY,UAAU,CAAV,EAAa;AAAE,gBAAU,CAAV;AAAc,KAAzC,CAAR;AACA,QAAI,QAAQ,CAAZ;AACA,QAAI,WAAW,OAAO,cAAP,CAAsB,EAAtB,EAA0B,MAA1B,EAAkC;AAC/C,WAAK,eAAY;AACf,iBAAS,CAAT;AACA,cAAM,IAAI,UAAJ,CAAe,iBAAf,CAAN;AACD;AAJ8C,KAAlC,CAAf;AAMA,YAAQ,QAAR;AACA,WAAO,KAAP,CAAa,KAAb,EAAoB,CAApB;AACA,QAAI,IAAI,EAAE,IAAF,CAAO,YAAY,CAAE,CAArB,EAAuB,OAAvB,EAAgC,UAAU,GAAV,EAAe;AACrD,aAAO,KAAP,CAAa,KAAb,EAAoB,CAApB;AACA,aAAO,EAAP,CAAU,eAAe,UAAzB;AACD,KAHO,CAAR;AAIA,QAAI,IAAI,EAAE,IAAF,CAAO,YAAY,CAAE,CAArB,EAAuB,OAAvB,EAAgC,UAAU,GAAV,EAAe;AACrD,aAAO,KAAP,CAAa,KAAb,EAAoB,CAApB;AACA,aAAO,EAAP,CAAU,eAAe,UAAzB;AACD,KAHO,CAAR;AAIA,WAAO,QAAQ,GAAR,CAAY,CAAC,CAAD,EAAI,CAAJ,CAAZ,CAAP;AACD,GArBD;AAsBD,CAvFD","file":"simple.js","sourcesContent":["/* global describe, specify, assert, Promise */\n\nvar failIfThrows = function (done) {\n  'use strict';\n\n  return function (e) {\n    done(e || new Error());\n  };\n};\n\ndescribe('Promise', function () {\n  'use strict';\n\n  specify('sanity check: a fulfilled promise calls its fulfillment handler', function (done) {\n    Promise.resolve(5).then(function (value) {\n      assert.strictEqual(value, 5);\n    }).then(done, failIfThrows(done));\n  });\n\n  specify('directly resolving the promise with itself', function (done) {\n    var resolvePromise;\n    var promise = new Promise(function (resolve) { resolvePromise = resolve; });\n\n    resolvePromise(promise);\n\n    promise.then(\n      function () {\n        assert(false, 'Should not be fulfilled');\n      },\n      function (err) {\n        assert(err instanceof TypeError);\n      }\n    ).then(done, failIfThrows(done));\n  });\n\n  specify('Stealing a resolver and using it to trigger possible reentrancy bug (#83)', function () {\n    var stolenResolver;\n    var StealingPromiseConstructor = function StealingPromiseConstructor(resolver) {\n      stolenResolver = resolver;\n      resolver(function () { }, function () { });\n    };\n\n    var iterable = {};\n    var atAtIterator = '@@iterator'; // on firefox, at least.\n    iterable[atAtIterator] = function () {\n      stolenResolver(null, null);\n      throw new Error(0);\n    };\n\n    assert.doesNotThrow(function () {\n      Promise.all.call(StealingPromiseConstructor, iterable);\n    });\n  });\n\n  specify('resolve with a thenable calls it once', function () {\n    var resolve;\n    var p = new Promise(function (r) { resolve = r; });\n    var count = 0;\n    resolve({\n      then: function () {\n        count += 1;\n        throw new RangeError('reject the promise');\n      }\n    });\n    var a = p.then(function () {})['catch'](function (err) {\n      assert.equal(count, 1);\n      assert.ok(err instanceof RangeError);\n    });\n    var b = p.then(function () {})['catch'](function (err) {\n      assert.equal(count, 1);\n      assert.ok(err instanceof RangeError);\n    });\n    return Promise.all([a, b]);\n  });\n\n  specify('resolve with a thenable that throws on .then, rejects the promise synchronously', function () {\n    var resolve;\n    var p = new Promise(function (r) { resolve = r; });\n    var count = 0;\n    var thenable = Object.defineProperty({}, 'then', {\n      get: function () {\n        count += 1;\n        throw new RangeError('no then for you');\n      }\n    });\n    resolve(thenable);\n    assert.equal(count, 1);\n    var a = p.then(function () {})['catch'](function (err) {\n      assert.equal(count, 1);\n      assert.ok(err instanceof RangeError);\n    });\n    var b = p.then(function () {})['catch'](function (err) {\n      assert.equal(count, 1);\n      assert.ok(err instanceof RangeError);\n    });\n    return Promise.all([a, b]);\n  });\n});\n"]}