{"version":3,"sources":["../../../../../node_modules/watchify/node_modules/outpipe/index.js"],"names":[],"mappings":";;AAAA,IAAI,QAAQ,QAAQ,aAAR,EAAuB,KAAnC;AACA,IAAI,OAAO,QAAQ,eAAR,EAAyB,IAApC;AACA,IAAI,OAAO,QAAQ,MAAR,CAAX;AACA,IAAI,OAAO,QAAQ,QAAR,GAAmB,GAAnB,GAAyB,KAAK,IAAL,CAAU,SAAV,EAAqB,UAArB,CAApC;AACA,IAAI,KAAK,QAAQ,IAAR,CAAT;;AAEA,OAAO,OAAP,GAAiB,UAAU,GAAV,EAAe,IAAf,EAAqB;AAClC,QAAI,QAAQ,MAAM,GAAN,CAAZ;AACA,SAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,MAAM,MAA1B,EAAkC,GAAlC,EAAuC;AACnC,YAAI,MAAM,CAAN,EAAS,EAAb,EAAiB;AACpB;AACD,QAAI,MAAM,MAAM,MAAhB,EAAwB;AAAE;AACtB,YAAI,IAAI,GAAG,iBAAH,CAAqB,GAArB,CAAR;AACA,UAAE,IAAF,CAAO,QAAP,EAAiB,YAAY;AAAE,cAAE,IAAF,CAAO,MAAP,EAAe,CAAf;AAAmB,SAAlD;AACA,UAAE,IAAF,CAAO,OAAP,EAAgB,UAAU,GAAV,EAAe;AAAE,cAAE,IAAF,CAAO,MAAP,EAAe,CAAf;AAAmB,SAApD;AACA,eAAO,CAAP;AACH,KALD,MAMK;AACD,YAAI,MAAM,MAAM,MAAN,GAAa,CAAnB,EAAsB,EAAtB,KAA6B,GAAjC,EAAsC;AAClC,mBAAO,IAAP;AACH;AACD,YAAI,MAAM,CAAN,EAAS,EAAT,KAAgB,GAApB,EAAyB;AACrB,kBAAM,OAAO,GAAb;AACH;AACD,YAAI,MAAM,CAAN,EAAS,EAAT,KAAgB,GAApB,EAAyB;AACrB,kBAAM,OAAO,GAAb;AACH;AACJ;AACD,QAAI,IAAI,KAAK,GAAL,EAAU,IAAV,CAAR;AACA,MAAE,MAAF,CAAS,IAAT,CAAc,QAAQ,MAAtB,EAA8B,EAAE,KAAK,KAAP,EAA9B;AACA,MAAE,MAAF,CAAS,IAAT,CAAc,QAAQ,MAAtB,EAA8B,EAAE,KAAK,KAAP,EAA9B;AACA,MAAE,IAAF,CAAO,MAAP,EAAe,UAAU,IAAV,EAAgB;AAAE,UAAE,KAAF,CAAQ,IAAR,CAAa,MAAb,EAAqB,IAArB;AAA4B,KAA7D;AACA,WAAO,EAAE,KAAT;AACH,CA3BD","file":"index.js","sourcesContent":["var parse = require('shell-quote').parse;\nvar exec = require('child_process').exec;\nvar path = require('path');\nvar echo = process.execPath + ' ' + path.join(__dirname, 'bin/echo');\nvar fs = require('fs');\n\nmodule.exports = function (str, opts) {\n    var parts = parse(str);\n    for (var i = 0; i < parts.length; i++) {\n        if (parts[i].op) break;\n    }\n    if (i === parts.length) { // no ops\n        var w = fs.createWriteStream(str);\n        w.once('finish', function () { w.emit('exit', 0) });\n        w.once('error', function (err) { w.emit('exit', 1) });\n        return w;\n    }\n    else {\n        if (parts[parts.length-1].op === '|') {\n            str += echo;\n        }\n        if (parts[0].op === '|') {\n            str = echo + str;\n        }\n        if (parts[0].op === '>') {\n            str = echo + str;\n        }\n    }\n    var p = exec(str, opts);\n    p.stderr.pipe(process.stderr, { end: false });\n    p.stdout.pipe(process.stdout, { end: false });\n    p.once('exit', function (code) { p.stdin.emit('exit', code) });\n    return p.stdin;\n};\n"]}