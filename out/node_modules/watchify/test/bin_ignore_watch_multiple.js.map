{"version":3,"sources":["../../../../node_modules/watchify/test/bin_ignore_watch_multiple.js"],"names":[],"mappings":";;AAAA,IAAI,OAAO,QAAQ,MAAR,CAAX;AACA,IAAI,KAAK,QAAQ,IAAR,CAAT;AACA,IAAI,OAAO,QAAQ,MAAR,CAAX;AACA,IAAI,SAAS,QAAQ,QAAR,CAAb;AACA,IAAI,QAAQ,QAAQ,WAAR,CAAZ;AACA,IAAI,QAAQ,QAAQ,OAAR,CAAZ;;AAEA,IAAI,MAAM,KAAK,OAAL,CAAa,SAAb,EAAwB,eAAxB,CAAV;AACA,IAAI,KAAK,QAAQ,IAAR,CAAT;AACA,IAAI,SAAS,KAAK,IAAL,CAAU,CAAC,GAAG,MAAH,IAAa,GAAG,MAAjB,GAAV,EAAsC,cAAc,KAAK,MAAL,EAApD,CAAb;;AAEA,IAAI,QAAQ;AACR,UAAM,KAAK,IAAL,CAAU,MAAV,EAAkB,SAAlB,CADE;AAER,UAAM,KAAK,IAAL,CAAU,MAAV,EAAkB,SAAlB,CAFE;AAGR,UAAM,KAAK,IAAL,CAAU,MAAV,EAAkB,SAAlB,CAHE;AAIR,WAAO,KAAK,IAAL,CAAU,MAAV,EAAkB,cAAlB,EAAkC,OAAlC,EAA2C,UAA3C,CAJC;AAKR,YAAQ,KAAK,IAAL,CAAU,MAAV,EAAkB,WAAlB;AALA,CAAZ;;AAQA,OAAO,IAAP,CAAY,MAAZ;AACA,OAAO,IAAP,CAAY,KAAK,OAAL,CAAa,MAAM,KAAnB,CAAZ;AACA,GAAG,aAAH,CAAiB,MAAM,IAAvB,EAA6B,CACzB,+BADyB,EAEzB,+BAFyB,EAGzB,+BAHyB,EAIzB,+CAJyB,EAK3B,IAL2B,CAKtB,IALsB,CAA7B;AAMA,GAAG,aAAH,CAAiB,MAAM,IAAvB,EAA6B,0BAA7B;AACA,GAAG,aAAH,CAAiB,MAAM,IAAvB,EAA6B,0BAA7B;AACA,GAAG,aAAH,CAAiB,MAAM,KAAvB,EAA8B,2BAA9B;;AAEA,KAAK,iCAAL,EAAwC,UAAU,CAAV,EAAa;AACjD,MAAE,IAAF,CAAO,CAAP;AACA,QAAI,KAAK,MAAM,GAAN,EAAW,CAChB,MAAM,IADU,EAEhB,gBAFgB,EAEE,WAFF,EAGhB,gBAHgB,EAGE,eAHF,EAIhB,IAJgB,EAIV,MAAM,MAJI,EAKhB,IALgB,CAAX,CAAT;AAOA,QAAI,UAAU,CAAd;AACA,OAAG,MAAH,CAAU,IAAV,CAAe,OAAf,EAAwB,EAAxB,CAA2B,MAA3B,EAAmC,UAAU,IAAV,EAAgB;AAC/C;AACA,YAAI,YAAY,CAAhB,EAAmB;AACf,gBAAI,MAAM,MAAV,EAAkB,UAAU,GAAV,EAAe,MAAf,EAAuB;AACrC,kBAAE,OAAF,CAAU,GAAV;AACA,kBAAE,KAAF,CAAQ,MAAR,EAAgB,mBAAhB;AACA,mBAAG,aAAH,CAAiB,MAAM,IAAvB,EAA6B,0BAA7B;AACA,mBAAG,aAAH,CAAiB,MAAM,IAAvB,EAA6B,0BAA7B;AACA,mBAAG,aAAH,CAAiB,MAAM,KAAvB,EAA8B,2BAA9B;AACH,aAND;AAOH,SARD,MASK,IAAI,YAAY,CAAhB,EAAmB;AACpB,gBAAI,MAAM,MAAV,EAAkB,UAAU,GAAV,EAAe,MAAf,EAAuB;AACrC,kBAAE,OAAF,CAAU,GAAV;AACA,kBAAE,KAAF,CAAQ,MAAR,EAAgB,mBAAhB;AACA,mBAAG,IAAH;AACH,aAJD;AAKH;AACJ,KAlBD;AAmBH,CA7BD;;AA+BA,SAAS,GAAT,CAAc,IAAd,EAAoB,EAApB,EAAwB;AACpB,QAAI,KAAK,MAAM,QAAQ,QAAd,EAAwB,CAAE,IAAF,CAAxB,CAAT;AACA,QAAI,OAAO,EAAX;AACA,OAAG,MAAH,CAAU,EAAV,CAAa,MAAb,EAAqB,UAAU,GAAV,EAAe;AAAE,aAAK,IAAL,CAAU,GAAV;AAAgB,KAAtD;AACA,OAAG,MAAH,CAAU,EAAV,CAAa,KAAb,EAAoB,YAAY;AAC5B,WAAG,IAAH,EAAS,OAAO,MAAP,CAAc,IAAd,EAAoB,QAApB,CAA6B,MAA7B,CAAT;AACH,KAFD;AAGA,OAAG,EAAH,CAAM,OAAN,EAAe,EAAf;AACA,WAAO,EAAP;AACH","file":"bin_ignore_watch_multiple.js","sourcesContent":["var test = require('tape');\nvar fs = require('fs');\nvar path = require('path');\nvar mkdirp = require('mkdirp');\nvar spawn = require('win-spawn');\nvar split = require('split');\n\nvar cmd = path.resolve(__dirname, '../bin/cmd.js');\nvar os = require('os');\nvar tmpdir = path.join((os.tmpdir || os.tmpDir)(), 'watchify-' + Math.random());\n\nvar files = {\n    main: path.join(tmpdir, 'main.js'),\n    beep: path.join(tmpdir, 'beep.js'),\n    boop: path.join(tmpdir, 'boop.js'),\n    robot: path.join(tmpdir, 'node_modules', 'robot', 'index.js'),\n    bundle: path.join(tmpdir, 'bundle.js')\n};\n\nmkdirp.sync(tmpdir);\nmkdirp.sync(path.dirname(files.robot));\nfs.writeFileSync(files.main, [\n    'var beep = require(\"./beep\");',\n    'var boop = require(\"./boop\");',\n    'var robot = require(\"robot\");',\n    'console.log(beep + \" \" + boop + \" \" + robot);'\n].join('\\n'));\nfs.writeFileSync(files.beep, 'module.exports = \"beep\";');\nfs.writeFileSync(files.boop, 'module.exports = \"boop\";');\nfs.writeFileSync(files.robot, 'module.exports = \"robot\";');\n\ntest('api ignore watch multiple paths', function (t) {\n    t.plan(4);\n    var ps = spawn(cmd, [\n        files.main,\n        '--ignore-watch', '**/be*.js',\n        '--ignore-watch', '**/robot/*.js',\n        '-o', files.bundle,\n        '-v'\n    ]);\n    var lineNum = 0;\n    ps.stderr.pipe(split()).on('data', function (line) {\n        lineNum ++;\n        if (lineNum === 1) {\n            run(files.bundle, function (err, output) {\n                t.ifError(err);\n                t.equal(output, 'beep boop robot\\n');\n                fs.writeFileSync(files.beep, 'module.exports = \"BEEP\";');\n                fs.writeFileSync(files.boop, 'module.exports = \"BOOP\";');\n                fs.writeFileSync(files.robot, 'module.exports = \"ROBOT\";');\n            });\n        }\n        else if (lineNum === 2) {\n            run(files.bundle, function (err, output) {\n                t.ifError(err);\n                t.equal(output, 'beep BOOP robot\\n');\n                ps.kill();\n            });\n        }\n    });\n});\n\nfunction run (file, cb) {\n    var ps = spawn(process.execPath, [ file ]);\n    var data = [];\n    ps.stdout.on('data', function (buf) { data.push(buf) });\n    ps.stdout.on('end', function () {\n        cb(null, Buffer.concat(data).toString('utf8'));\n    });\n    ps.on('error', cb);\n    return ps;\n}\n"]}